--[[
    LitClient FE v2.0 — 2025 Edition
    Clean • Mobile Gods • Infinite Yield vibes but better
    Made with love for the real ones
]]

local Players           = game:GetService("Players")
local RunService        = game:GetService("RunService")
local UserInputService  = game:GetService("UserInputService")
local TweenService      = game:GetService("TweenService")
local CoreGui           = game:GetService("CoreGui")
local TeleportService   = game:GetService("TeleportService")
local StarterGui        = game:GetService("StarterGui")

local LocalPlayer = Players.LocalPlayer

--// CONFIG
local Prefix = ";"
local FlySpeed = 120
local Flying = false

--// UI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LitClientV2"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = CoreGui

local Main = Instance.new("Frame")
Main.Size = UDim2.new(0, 280, 0, 46)
Main.Position = UDim2.new(1, -290, 1, -56)
Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Main.BorderSizePixel = 0
Main.BackgroundTransparency = 0.05
Main.Parent = ScreenGui

local Corner = Instance.new("UICorner", Main)
Corner.CornerRadius = UDim.new(0, 10)

local Stroke = Instance.new("UIStroke", Main)
Stroke.Color = Color3.fromRGB(255, 255, 255)
Stroke.Transparency = 0.8
Stroke.Thickness = 1.5

local Input = Instance.new("TextBox", Main)
Input.Size = UDim2.new(1, -80, 1, 0)
Input.Position = UDim2.new(0, 12, 0, 0)
Input.BackgroundTransparency = 1
Input.Text = ""
Input.PlaceholderText = "LitClient v2 — press ;"
Input.TextColor3 = Color3.fromRGB(255, 255, 255)
Input.Font = Enum.Font.GothamBold
Input.TextSize = 15
Input.TextXAlignment = Enum.TextXAlignment.Left
Input.PlaceholderColor3 = Color3.fromRGB(180, 180, 180)
Input.ClipsDescendants = true

local ToggleBtn = Instance.new("TextButton", Main)
ToggleBtn.Size = UDim2.new(0, 46, 1, 0)
ToggleBtn.Position = UDim2.new(1, -52, 0, 0)
ToggleBtn.BackgroundTransparency = 1
ToggleBtn.Text = "⬇"
ToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleBtn.Font = Enum.Font.GothamBlack
ToggleBtn.TextSize = 20

--// FLY GLOBALS
local BodyGyro, BodyVelocity = nil, nil

--// NOTIF FUNCTION
local function Notify(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title;
            Text = text;
            Duration = duration or 2;
        })
    end)
end

--// PERFECT FLY 2025
local function StartFly(speed)
    if Flying then return end
    Flying = true
    FlySpeed = tonumber(speed) or 120

    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local root = char:WaitForChild("HumanoidRootPart")
    local hum = char:WaitForChild("Humanoid")

    hum.PlatformStand = true

    BodyGyro = Instance.new("BodyGyro")
    BodyGyro.P = 15000
    BodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    BodyGyro.CFrame = root.CFrame
    BodyGyro.Parent = root

    BodyVelocity = Instance.new("BodyVelocity")
    BodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    BodyVelocity.Velocity = Vector3.new(0,0,0)
    BodyVelocity.Parent = root

    local boost = 0
    local jumpConn = UserInputService.JumpRequest:Connect(function()
        if Flying then boost = 60 end
    end)

    local loop = RunService.RenderStepped:Connect(function(dt)
        if not (Flying and root.Parent) then StopFly() return end

        local cam = workspace.CurrentCamera
        local move = hum.MoveDirection * FlySpeed

        local forward = move.Magnitude > 0 and move.Unit or Vector3.new(cam.CFrame.LookVector.X, 0, cam.CFrame.LookVector.Z).Unit
        local up = cam.CFrame.LookVector.Y * 80

        if boost > 0 then
            up = up + boost
            boost = boost - 150 * dt
        end

        BodyVelocity.Velocity = forward * FlySpeed + Vector3.new(0, up, 0)
        BodyGyro.CFrame = CFrame.new(Vector3.new(), cam.CFrame.LookVector)
    end)

    hum.Died:Connect(StopFly)

    StartFly.Loop = loop
    StartFly.Jump = jumpConn

    Notify("LitClient", "Fly enabled — "..FlySpeed.." studs/s", 2)
end

function StopFly()
    if not Flying then return end
    Flying = false

    if BodyGyro then BodyGyro:Destroy() end
    if BodyVelocity then BodyVelocity:Destroy() end
    if StartFly.Loop then StartFly.Loop:Disconnect() end
    if StartFly.Jump then StartFly.Jump:Disconnect() end

    BodyGyro = nil; BodyVelocity = nil

    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
    if hum then hum.PlatformStand = false end

    Notify("LitClient", "Fly disabled", 1.5)
end

--// COMMANDS
local Commands = {
    fly = function(args)
        if Flying then StopFly() else StartFly(args[1]) end
    end,
    unfly = StopFly,
    speed = function(args)
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
        if hum and args[1] then
            hum.WalkSpeed = tonumber(args[1]) or 16
            Notify("LitClient", "WalkSpeed → "..hum.WalkSpeed)
        end
    end,
    jp = function(args)
        local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
        if hum and args[1] then
            hum.JumpPower = tonumber(args[1]) or 50
            Notify("LitClient", "JumpPower → "..hum.JumpPower)
        end
    end,
    esp = function()
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character then
                if not p.Character:FindFirstChild("LitESP") then
                    local hl = Instance.new("Highlight", p.Character)
                    hl.Name = "LitESP"
                    hl.FillTransparency = 0.4
                    hl.OutlineTransparency = 0
                    hl.FillColor = Color3.fromRGB(255, 0, 100)
                    hl.OutlineColor = Color3.fromRGB(255, 255, 255)
                end
            end
        end
        Notify("LitClient", "ESP enabled")
    end,
    rejoin = function()
        TeleportService:Teleport(game.PlaceId, LocalPlayer)
    end,
    rj = function() TeleportService:Teleport(game.PlaceId, LocalPlayer) end,
}

--// EXECUTE
local function Execute(str)
    if str == "" then return end
    local args = str:split(" ")
    local cmd = table.remove(args, 1):lower():gsub(Prefix, "")

    if Commands[cmd] then
        Commands[cmd](args)
        Input.PlaceholderText = "✔ "..cmd
        task.wait(1.2)
        Input.PlaceholderText = "LitClient v2 — press ;"
    else
        Input.PlaceholderText = "❌ unknown cmd"
        task.wait(1.2)
        Input.PlaceholderText = "LitClient v2 — press ;"
    end
end

--// INPUT
Input.FocusLost:Connect(function(enter)
    if enter then
        if Input.Text:sub(1,1) == Prefix then
            Execute(Input.Text)
        elseif Input.Text ~= "" then
            Execute(Prefix .. Input.Text)
        end
        Input.Text = ""
    end
end)

-- Open with ; anywhere
UserInputService.InputBegan:Connect(function(i)
    if i.KeyCode == Enum.KeyCode.Semicolon and not UserInputService:GetFocusedTextBox() then
        Input:CaptureFocus()
        Input.Text = Prefix
    end
end)

Notify("LitClient v2", "Loaded — press ; to open", 3)
