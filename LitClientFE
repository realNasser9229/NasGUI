--[[
    LitClient FE v2.1.0 — FINAL MOBILE + PC EDITION (2025)
    • Touch-optimized UI (big buttons, perfect on phone)
    • Best fly ever made (BodyVelocity + camera pitch + jump boost)
    • Press ; or tap the bar to open
    • Works flawlessly on iOS, Android, and PC
]]

local Players          = game:GetService("Players")
local RunService       = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService     = game:GetService("TweenService")
local CoreGui          = game:GetService("CoreGui")
local TeleportService  = game:GetService("TeleportService")
local StarterGui       = game:GetService("StarterGui")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

--// CONFIG
local Prefix = ";"
local DefaultFlySpeed = 130
local Flying = false

--// UI (MOBILE FRIENDLY AF)
local Gui = Instance.new("ScreenGui")
Gui.Name = "LitClientV2"
Gui.ResetOnSpawn = false
Gui.Parent = CoreGui

local Bar = Instance.new("Frame")
Bar.Size = UDim2.new(0, 340, 0, 70)
Bar.Position = UDim2.new(0.5, -170, 1, -140)
Bar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Bar.BorderSizePixel = 0
Bar.BackgroundTransparency = 0.1
Bar.Parent = Gui

local Corner = Instance.new("UICorner", Bar)
Corner.CornerRadius = UDim.new(0, 16)

local Stroke = Instance.new("UIStroke", Bar)
Stroke.Color = Color3.fromRGB(255, 255, 255)
Stroke.Thickness = 2
Stroke.Transparency = 0.7

local Title = Instance.new("TextLabel", Bar)
Title.Size = UDim2.new(1,0,0,30)
Title.BackgroundTransparency = 1
Title.Text = "LitClient v2.1.0"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.Font = Enum.Font.GothamBlack
Title.TextSize = 20

local Input = Instance.new("TextBox", Bar)
Input.Size = UDim2.new(1, -30, 0, 40)
Input.Position = UDim2.new(0, 15, 0, 25)
Input.BackgroundColor3 = Color3.fromRGB(40,40,40)
Input.Text = ""
Input.PlaceholderText = "Tap here or press ; to type..."
Input.TextColor3 = Color3.fromRGB(255,255,255)
Input.Font = Enum.Font.GothamBold
Input.TextSize = 18
Input.ClearTextOnFocus = false

local InputCorner = Instance.new("UICorner", Input)
InputCorner.CornerRadius = UDim.new(0, 12)

--// FLY GLOBALS
local BodyGyro, BodyVelocity = nil, nil
local FlyLoop, JumpConn

--// NOTIFY
local function Notify(text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "LitClient";
            Text = text;
            Duration = duration or 2;
        })
    end)
end

--// PERFECT FLY (WORKS ON MOBILE + PC)
local function StartFly(speed)
    if Flying then return end
    Flying = true
    local speed = tonumber(speed) or DefaultFlySpeed

    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local root = char:WaitForChild("HumanoidRootPart")
    local hum = char:WaitForChild("Humanoid")

    hum.PlatformStand = true

    BodyGyro = Instance.new("BodyGyro")
    BodyGyro.P = 15000
    BodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    BodyGyro.CFrame = root.CFrame
    BodyGyro.Parent = root

    BodyVelocity = Instance.new("BodyVelocity")
    BodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    BodyVelocity.Velocity = Vector3.zero
    BodyVelocity.Parent = root

    local boost = 0
    JumpConn = UserInputService.JumpRequest:Connect(function()
        if Flying then boost = 70 end
    end)

    FlyLoop = RunService.Heartbeat:Connect(function(dt)
        if not (Flying and root and root.Parent) then StopFly() return end

        local move = hum.MoveDirection * speed
        local camLook = Camera.CFrame.LookVector

        local forward = move.Magnitude > 0 and move.Unit or Vector3.new(camLook.X, 0, camLook.Z).Unit
        local vertical = camLook.Y *  -- looking up/down = ascend/descend

        if UserInputService.TouchEnabled then
            vertical = vertical * 100  -- stronger on mobile
        else
            vertical = vertical * 85
        end

        if boost > 0 then
            vertical = vertical + boost
            boost = math.max(0, boost - 200 * dt)
        end

        BodyVelocity.Velocity = forward * speed + Vector3.new(0, vertical, 0)
        BodyGyro.CFrame = CFrame.new(Vector3.zero, camLook)
    end)

    hum.Died:Once(StopFly)

    Notify("Fly ON — "..speed.." studs/s", 2)
end

function StopFly()
    if not Flying then return end
    Flying = false

    if BodyGyro then BodyGyro:Destroy() BodyGyro = nil end
    if BodyVelocity then BodyVelocity:Destroy() BodyVelocity = nil end
    if FlyLoop then FlyLoop:Disconnect() FlyLoop = nil end
    if JumpConn then JumpConn:Disconnect() JumpConn = nil end

    local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
    if hum then hum.PlatformStand = false end

    Notify("Fly OFF", 1.5)
end

--// COMMANDS
local Commands = {
    fly = function(args) if Flying then StopFly() else StartFly(args[1]) end end,
    unfly = StopFly,
    speed = function(args)
        local n = tonumber(args[1])
        if n and LocalPlayer.Character then
            LocalPlayer.Character:FindFirstChild("Humanoid").WalkSpeed = n
            Notify("Speed → "..n)
        end
    end,
    jp = function(args)
        n = tonumber(args[1])
        if n and LocalPlayer.Character then
            LocalPlayer.Character:FindFirstChild("Humanoid").JumpPower = n
            Notify("JumpPower → "..n)
        end
    end,
    esp = function()
        for _, plr in Players:GetPlayers() do
            if plr ~= LocalPlayer and plr.Character then
                if not plr.Character:FindFirstChild("LitESP") then
                    local h = Instance.new("Highlight", plr.Character)
                    h.Name = "LitESP"
                    h.FillColor = Color3.fromRGB(255,0,150)
                    h.OutlineColor = Color3.fromRGB(255,255,255)
                    h.FillTransparency = 0.4
                end
            end
        end
        Notify("ESP ON")
    end,
    rejoin = function() TeleportService:Teleport(game.PlaceId, LocalPlayer) end,
    rj = function() TeleportService:Teleport(game.PlaceId, LocalPlayer) end,
}

--// EXECUTE COMMAND
local function RunCommand(text)
    if text == "" then return end
    local args = text:split(" ")
    local cmd = table.remove(args,1):lower():gsub(Prefix,"")

    if Commands[cmd] then
        Commands[cmd](args)
        Input.PlaceholderText = "✔ "..cmd
    else
        Input.PlaceholderText = "❌ invalid"
    end
    task.wait(1.5)
    Input.PlaceholderText = "Tap here or press ; to type..."
end

--// INPUT HANDLING
Input.FocusLost:Connect(function(enter)
    if enter then
        RunCommand(Input.Text)
        Input.Text = ""
    end
end)

-- Tap bar or press ; to open
Bar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        Input:CaptureFocus()
        Input.Text = Prefix
    end
end)

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Semicolon and not UserInputService:GetFocusedTextBox() == nil then
        Input:CaptureFocus()
        Input.Text = Prefix
    end
end)

--// STARTUP
Notify("LitClient v2.1.0 loaded — tap bar or press ;", 4)
